
<%= content_for :side_bar do %>

  <div class="list-group-item" data-controller="switch" id="switch-area">
    <!-- 新增鈕 -->
    <a href="#" data-action="click->switch#toAddContent" id="add">+ Add Content</a>
    <!-- 返回鈕 -->
    <a href="#" data-action="click->switch#toDrag" id="back" style="display: none;">Go back</a>
  </div>
  
  <div id="drag-area">
    <div data-controller="switch" class="list-group-item d-flex justify-content-between">
      <%= hidden_field_tag :edit_form, "edit_header", data: {target: "switch.form"} %>
      <div>
        Header
      </div>
      <div>
        <%= link_to "#", data: {action: "click->switch#toEdit"} do %>
          <i class="far fa-edit"></i>
        <% end %>
      </div>
    </div>
    <!-- 拖拉區域 -->
    <div class="card" id="editor" data-controller="drag" data-target="editor">
      <% @contents.each do |content| %>
        <%= render "/shared/template/#{content.layout}",type: :drag, content: content %>
      <% end %>
    </div>

    <div data-controller="switch" class="list-group-item d-flex justify-content-between">
      <%= hidden_field_tag :edit_form, "edit_footer", data: {target: "switch.form"} %>
      <div>
        Footer
      </div>
      <div>
        <%= link_to "#", data: {action: "click->switch#toEdit"} do %>
          <i class="far fa-edit"></i>
        <% end %>
      </div>
    </div>
  </div>
  
  
  <!-- 隱藏表單 -->
  <div id="form-area">

    <!-- contents編輯器 -->
    <% @contents.each do |content| %>
      <%= render "shared/template/#{content.layout}",type: :form, content: content %>
    <% end %>

    <!-- header編輯器 -->
    <div style="display: none;" class="edit_content" id="edit_header" data-controller="header">
      <div class="form-group">
        <label for="edit-preheader">preheader</label>
        <input data-target="header.preheader" class="form-control" type="text" id="edit-preheader">
      </div>
      <div class="form-group">
        <label for="edit-title">title</label>
        <input data-target="header.title" class="form-control" type="text" id="edit-title">
      </div>
      <div class="form-group">
        <label for="edit-desc">desc</label>
        <textarea data-target="header.desc" class="form-control" id="edit-desc"></textarea>
      </div>
      <button class="form-control" data-action="click->header#submit">OK</button>
    </div>

    <!-- footer編輯器 -->
    <div class="edit-content" id="edit_footer">

    </div>


  </div>

  <!-- template選單 -->
  <div id="menu-area" style="display: none;">
    <div class="d-flex" data-controller="switch">
      <div class="card col-6" data-action="click->switch#toContentList"><a class="text-center" href="#" >Template</a></div>
      <div class="card col-6" data-action="click->switch#toSavedLinks"><a class="text-center" href="#" >Saved_link</a></div>
    </div>  
    <%= render "shared/template/index" %>
    <%= render "shared/partials/index" %>
  </div>

<% end %>

<!-- 文章內容 -->
<div class="card-header">
  <div class="row justify-content-between w-75 ml-3">
    <h3><%= @article.subject %></h3>
    <div>
      <%= link_to "Edit subject", edit_article_path(@article), method: :GET, class:"btn btn-primary btn-sm" %>
    </div>
  </div>
  <p>I'm article show.</p>
</div>
<div class="card-body container w-75">

  <!-- 頁首 -->
  <%= @article.header.html_safe %>

  <!-- 文章 -->
  <div id="contents" data-articleId="<%= @article.id %>" >
    <% @contents.each do |content| %>
      <%= render "shared/template/#{content.layout}",type: :show, content: content %>
    <% end %>
  </div>

  <!-- 頁尾 -->
  <%= @article.footer.html_safe %>

</div>


