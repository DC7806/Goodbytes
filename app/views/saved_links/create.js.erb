(function () {
  let ok = '<%= @ajax_create_link[:ok] %>' === 'true'

  if (ok) {
    let group_id = '<%= @saved_link.link_group_id %>'

    $(`#create-link-${group_id}`).modal('hide')
    $('.modal-backdrop').hide()

    $(`#create-link-${group_id} .link_url`).val('');
    $(`#create-link-${group_id} .link_subject`).val('');
    $(`#create-link-${group_id} .link_summary`).val('');
    console.log("<%= @saved_link.id %>")
    $(`.link_group`).replaceWith("<%= j render('shared/partials/create_link_group', link_groups: @link_groups, link_group: @saved_link.link_group, new_link_group: @channel.link_groups.new, new_saved_link: @link_group.saved_links.new) %>")
  } else {
    alert('<%= @ajax_create_link[:message] %>')
  }
})()